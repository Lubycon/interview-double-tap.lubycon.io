"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[996],{45922:function(e,n,t){var r=t(92809),o=t(70917),c=t(91164),i=t(16914),u=t(35944),l=["show","children"];function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.show,t=e.children,r=(0,c.Z)(e,l);return(0,u.tZ)("div",a(a({css:(0,o.iv)({position:"fixed",bottom:"0",left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:i.t,zIndex:100,boxSizing:"border-box"},"","")},r),{},{children:(0,u.tZ)("div",{css:(0,o.iv)({transform:"translateY(".concat(n?"0":"100%",")"),transition:"transform 0.3s ease-in-out"},"",""),children:t})}))}},17951:function(e,n,t){var r=t(92809),o=t(70917),c=t(91164),i=t(11371),u=t(89353),l=t(35944),s=["children"],a=["children"];function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var d=function(e){var n=e.upper,t=e.lower;return(0,l.BX)(u.kC,{direction:"column",children:[(0,l.tZ)(u.Ki,{size:24}),n,null!=n&&null!=t?(0,l.tZ)(u.Ki,{size:8}):null,t,(0,l.tZ)(u.Ki,{size:16})]})};d.Text2=function(e){var n=e.children,t=(0,c.Z)(e,s);return(0,l.tZ)("h2",p(p({css:(0,o.iv)({fontWeight:"bold",fontSize:24,lineHeight:1.3,color:i.O.gray[9],whiteSpace:"pre-line"},"","")},t),{},{children:n}))},d.Text6=function(e){var n=e.children,t=(0,c.Z)(e,a);return(0,l.tZ)("p",p(p({},t),{},{children:n}))},n.Z=d},65996:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var r=t(30266),o=t(21582),c=t(809),i=t.n(c),u=t(55641),l=t(67294),s=t(8424),a=t.n(s);var f=t(45922),p=t(17951),d=t(8031),h=t(10767),b=t(89353),v=t(35944);var O=function(e){var n;return function(){return n||(n=a().createClient(e)),n}}({mode:"rtc",codec:"vp8"}),y=function(e){var n=null;return function(){var t=(0,l.useState)(!1),r=t[0],o=t[1],c=(0,l.useState)(null),i=c[0],u=c[1],s=(0,l.useRef)(n);return(0,l.useEffect)((function(){return null===s.current?function(){try{return Promise.resolve(a().createMicrophoneAudioTrack(e)).then((function(e){return n=e}))}catch(t){return Promise.reject(t)}}().then((function(e){s.current=e,o(!0)}),(function(e){u(e)})):o(!0),function(){n=null}}),[]),{ready:r,track:s.current,error:i}}}({encoderConfig:{sampleRate:48e3,stereo:!0,bitrate:128}}),g={name:"a3z6ut",styles:"padding:0 20px"},Z=function(e){var n=e.token,t=e.channelName,c=e.onStart,s=e.onStop,a=O(),Z=y(),j=Z.ready,m=Z.track,w=(0,u.zj)(),k=(0,o.Z)(w,3),x=k[0],P=k[1],C=k[2],S=(0,l.useState)(null),z=S[0],E=S[1],D=(0,l.useCallback)((0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(h.xD),e.next=3,a.join(h.xD,t,n,null);case 3:P(),console.log("track -> ",m),null!=m&&a.publish(m);case 6:case"end":return e.stop()}}),e)}))),[a,P,m]),T=(0,l.useCallback)((function(){console.log("leave"),a.leave(),E(null),C(),null===s||void 0===s||s()}),[a,C,s]);return(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.on("user-published",function(){var e=(0,r.Z)(i().mark((function e(n,t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.subscribe(n,t);case 2:console.log("subscribe success"),E(n),null===c||void 0===c||c(),null===(r=n.audioTrack)||void 0===r||r.play();case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),a.on("user-unpublished",(function(e,n){var t;console.log("unpublished",e,n),E(null),null===(t=e.audioTrack)||void 0===t||t.stop()})),a.on("user-left",(function(e){console.log("leaving",e),T()}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log(j,m,t),j&&m&&t&&(console.log("init ready"),e()),function(){"CONNECTED"!==a.connectionState&&"CONNECTING"!==a.connectionState||T()}}),[j,m,t,T]),(0,v.BX)(b.kC,{direction:"column",css:g,children:[(0,v.tZ)(p.Z,{upper:(0,v.BX)(p.Z.Text2,{children:["\ucc44\ub110\uba85 [",t,"]"]})}),(0,v.tZ)(b.Ki,{size:20}),(0,v.BX)(b.xv,{children:["\ub0b4 \uc720\uc800 \uc544\uc774\ub514: ",a.uid]}),(0,v.tZ)(b.Ki,{size:20}),null!=z&&(0,v.BX)(v.HY,{children:[(0,v.BX)(b.xv,{children:["\uc720\uc800 ",z.uid,"\uc640 \ud1b5\ud654\uc911"]}),(0,v.tZ)(b.Ki,{size:20})]}),(0,v.tZ)(f.Z,{show:!0,children:x?(0,v.tZ)(d.Z.BottomCTA,{onClick:T,children:"\ud1b5\ud654\uc885\ub8cc"}):(0,v.tZ)(d.Z.BottomCTA,{styleType:"primary",onClick:D,disabled:!1===j,children:"\ud1b5\ud654\uc2dc\uc791"})}),(0,v.tZ)(b.Ki,{size:20})]})}},91164:function(e,n,t){function r(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}t.d(n,{Z:function(){return r}})}}]);