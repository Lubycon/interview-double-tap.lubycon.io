"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{45922:function(e,t,r){var n=r(92809),o=r(70917),c=r(91164),i=r(16914),u=r(35944),l=["show","children"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){var t=e.show,r=e.children,n=(0,c.Z)(e,l);return(0,u.tZ)("div",a(a({css:(0,o.iv)({position:"fixed",bottom:"0",left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:i.t,zIndex:100,boxSizing:"border-box"},"","")},n),{},{children:(0,u.tZ)("div",{css:(0,o.iv)({transform:"translateY(".concat(t?"0":"100%",")"),transition:"transform 0.3s ease-in-out"},"",""),children:r})}))}},17951:function(e,t,r){var n=r(92809),o=r(70917),c=r(91164),i=r(11371),u=r(89353),l=r(35944),s=["children"],a=["children"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(e){var t=e.upper,r=e.lower;return(0,l.BX)(u.kC,{direction:"column",children:[(0,l.tZ)(u.Ki,{size:24}),t,null!=t&&null!=r?(0,l.tZ)(u.Ki,{size:8}):null,r,(0,l.tZ)(u.Ki,{size:16})]})};d.Text2=function(e){var t=e.children,r=(0,c.Z)(e,s);return(0,l.tZ)("h2",p(p({css:(0,o.iv)({fontWeight:"bold",fontSize:24,lineHeight:1.3,color:i.O.gray[9],whiteSpace:"pre-line"},"","")},r),{},{children:t}))},d.Text6=function(e){var t=e.children,r=(0,c.Z)(e,a);return(0,l.tZ)("p",p(p({},r),{},{children:t}))},t.Z=d},83968:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var n=r(30266),o=r(21582),c=r(809),i=r.n(c),u=r(55641),l=r(67294),s=r(8424),a=r.n(s);var f=r(45922),p=r(17951),d=r(8031),b=r(10767),h=r(89353),O=r(92809),v=r(91164),y=r(70917),g=r(11371),j=r(35944),w=["color","size","fontSize","children"];function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,O.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=240,k={name:"pw7jst",styles:"position:relative;width:100%"},S=function(e){var t=e.color,r=e.size,n=e.fontSize,o=e.children,c=(0,v.Z)(e,w);return(0,j.tZ)(h.kC,m(m({justify:"center",align:"center",css:(0,y.iv)({backgroundColor:t,color:g.O.white,width:r,height:r,borderRadius:"50%",opacity:.6},"","")},c),{},{children:(0,j.tZ)(h.xv,{size:n,children:o})}))},x=function(e){var t=e.opponentUser,r=null!=t;return(0,j.BX)("div",{css:k,children:[(0,j.tZ)(S,{color:r?g.O.cyan[5]:g.O.gray[6],size:P,css:(0,y.iv)({position:"absolute",top:0,left:-30},"",""),children:r?"\uc720\uc800 ".concat(t):"\uc544\uc9c1 \uc785\uc7a5\ud558\uc9c0 \uc54a\uc558\uc5b4\uc694"}),(0,j.tZ)(S,{color:g.O.primary,size:312,fontSize:20,css:(0,y.iv)({position:"absolute",top:120,right:-78},"",""),children:"\ub098"})]})};var z=function(e){var t;return function(){return t||(t=a().createClient(e)),t}}({mode:"rtc",codec:"vp8"}),C=function(e){var t=null;return function(){var r=(0,l.useState)(!1),n=r[0],o=r[1],c=(0,l.useState)(null),i=c[0],u=c[1],s=(0,l.useRef)(t);return(0,l.useEffect)((function(){return null===s.current?function(){try{return Promise.resolve(a().createMicrophoneAudioTrack(e)).then((function(e){return t=e}))}catch(r){return Promise.reject(r)}}().then((function(e){s.current=e,o(!0)}),(function(e){u(e)})):o(!0),function(){t=null}}),[]),{ready:n,track:s.current,error:i}}}({encoderConfig:{sampleRate:48e3,stereo:!0,bitrate:128}}),D={name:"a3z6ut",styles:"padding:0 20px"},E=function(e){var t=e.token,r=e.channelName,c=e.onStart,s=e.onStop,a=e.onReady,O=z(),v=C(),y=v.ready,g=v.track,w=(0,u.zj)(),Z=(0,o.Z)(w,3),m=Z[0],P=Z[1],k=Z[2],S=(0,l.useState)(),E=S[0],T=S[1],N=(0,l.useCallback)((0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(b.xD),e.next=3,O.join(b.xD,r,t,null);case 3:P(),console.log("track -> ",g),null!=g&&O.publish(g);case 6:case"end":return e.stop()}}),e)}))),[O,P,g]),B=(0,l.useCallback)((function(){console.log("leave"),O.leave(),T(void 0),k(),null===s||void 0===s||s()}),[O,k,s]);return(0,l.useEffect)((function(){if(!1!==y&&null!=g){return O.on("user-published",function(){var e=(0,n.Z)(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.subscribe(t,r);case 2:console.log("subscribe success"),T(t.uid),null===c||void 0===c||c(),null===(n=t.audioTrack)||void 0===n||n.play();case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),O.on("user-unpublished",(function(e,t){var r;console.log("unpublished",e,t),T(void 0),null===(r=e.audioTrack)||void 0===r||r.stop()})),O.on("user-left",(function(e){console.log("leaving",e),B()})),function(){"CONNECTED"!==O.connectionState&&"CONNECTING"!==O.connectionState||B()}}}),[y,g,B]),(0,l.useEffect)((function(){!0===y&&(null===a||void 0===a||a())}),[y]),(0,j.BX)(h.kC,{direction:"column",css:D,children:[(0,j.tZ)(p.Z,{upper:(0,j.BX)(p.Z.Text2,{children:["\ucc44\ub110\uba85 [",r,"]"]})}),(0,j.tZ)(h.Ki,{size:100}),(0,j.tZ)(x,{opponentUser:E}),(0,j.tZ)(f.Z,{show:!0,children:m?(0,j.tZ)(d.Z.BottomCTA,{styleType:"danger",onClick:B,children:"\ub098\uac00\uae30"}):(0,j.tZ)(d.Z.BottomCTA,{styleType:"primary",onClick:N,disabled:!1===y,children:"\uc785\uc7a5\ud558\uae30"})}),(0,j.tZ)(h.Ki,{size:20})]})}},91164:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r.d(t,{Z:function(){return n}})}}]);